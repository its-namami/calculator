:root,
html,
body {
  margin: 0;
}

@font-face {
  font-family: 'Speedy Font';
  src:
    url('../fonts/SpeedyRegular-7BLoE.woff2');
}

@font-face {
  font-family: 'Nerd Font';
  src:
    url('../fonts/nerdFont.woff2');
}

#calculator-wrapper {
  display: flex;
  overflow: hidden;
  aspect-ratio: 9 / 16;
  will-change: transform;
  max-height: 100dvh;
  justify-content: center;

  @media (min-width: 480px) {
    position: absolute;
    top: 50%;
    left: 50%;
    aspect-ratio: 3 / 4; 
    transform: translate(-50%, -50%);
    height: 90dvh;
    width: auto;
    max-width: 100dvw;
  }

  @media (min-width: 1280px) {
    height: 75dvh;
  }

  @media (min-width: 1280px) {
    height: 50dvh;
  }

  & > #calculator {
    outline: 1px solid darkgray;
    outline-offset: -1px;
    max-width: fit-content;
    height: 100%;
    min-width: 100%;
    display: flex;
    flex-flow: column nowrap;
    user-select: none;
    -webkit-user-select: none;
    background-color: darkgray;
    will-change: transform;

    & button {
      overflow: hidden;
    }

    &.edit-mode {
      outline-color: red;
    }

    & *,
    & .speedy-font {
      font-family: 'Speedy Font', sans-serif;

      &.nerd-font {
        font-family: 'Nerd Font', sans-serif;
      }
    }

    & > #visor {
      display: flex;
      justify-content: space-between;
      flex: 0.3;
      align-items: center;
      position: relative;
      font-size: 3rem;
      padding: 0 2rem;
      gap: 0.5rem;
      z-index: -1;
      background-color: white;

      & > #alternate-numbers {
        flex: 1;
        display: flex;
        flex-flow: column nowrap;
        border-right: 1px solid black;

        &.hide-alternate-numbers {
          display: none;
        }
        
        & > .alternate-number {
          white-space: nowrap;
          overflow-x: scroll;
          scrollbar-width: none;
          text-overflow: ellipsis;
          font-size: 0.3em;
          max-width: 5ch;
          padding: 0.5rem 1rem;
          cursor: pointer;
          font-weight: 100;

          &.active {
            font-size: 0.45em;
            font-weight: 900;
          }
        }
      }

      & > #operator-display {
        position: absolute;
        right: 0.5rem;
        top: 0.5rem;
        font-size: 0.7em;
      }

      & > #extras {
        position: fixed;
        display: flex;
        flex-flow: column nowrap;
        top: 0.5rem;
        left: 0.5rem;
        z-index: 1;
        font-size: 0.5em;

        & > #copy-clipboard {
          color: #C427AA;
          z-index: 2;
          -webkit-text-stroke-width: 1px;
          transform: scale(0.8);
          opacity: 0.3;
          transition: 
            opacity 0.1s ease-in,
            transform 0.1s ease;

          &:hover {
            cursor: pointer;
            opacity: 1;
            -webkit-text-stroke-color: gold;
            transform: scale(1);
          }
        }

        & > #hide-alternate-numbers {
          color: #C427AA;
          z-index: 2;
          -webkit-text-stroke-width: 1px;
          transform: scale(0.8);
          opacity: 0.3;
          transition: 
            opacity 0.1s ease-in,
            transform 0.1s ease;

          &:hover {
            cursor: pointer;
            opacity: 1;
            -webkit-text-stroke-color: gold;
            transform: scale(1);
          }
        }
      }

      & > #number-display {
        flex: 5;
        position: relative;
        overflow-x: scroll;
        scrollbar-width: none;
        display: flex;
        flex-direction: row-reverse;
        justify-content: flex-start;

        & > p.numberOutput {
          user-select: text;
          width: max-content;
          margin: 0;
        }

      }

    }

    & > #buttons {
      flex: 1;
      display: grid;
      grid-template: repeat(5, 1fr) / repeat(4, 1fr);
      margin-top: .5rem;

      & button:is(.number, .operator, .special) {
        border: 1px solid darkgray;
        font-size: 1.7rem;
        transition: background-color 0.08s ease-out;
      }

      & button.number {
        background-color: white;

        &:hover { background-color: #d0e8ff }
        &:active { background-color: #b0c8ff }
      }

      & button.operator {
        background-color: black;
        color: white;

        &:hover { background-color: #708090 }
        &:active { background-color: #506090 }
      }

      & button.special {
        background-color: #D43775;
        color: white;

        &:hover:not([disabled]) { background-color: #C427AA }
        &:active:not([disabled]) { background-color: #A4078A }
      }

      & #positions {
        display: grid;
        grid-template: repeat(2, 1fr) / repeat(2, 1fr);
      }

      & > #main-pad {
        display: grid;
        grid-area: 1 /  1 /span 4 / span 3;
        grid-template: repeat(4, 1fr) / repeat(3, 1fr);

        & > button.special {
          order: 1;
        }
      }

      & > #side-pad {
        display: flex;
        grid-area: 1 /  -2 /-1 / -1;
        flex-flow: column nowrap;

        & > * {
          flex: 1;
        }
      }

      & > #bottom-pad {
        display: grid;
        grid-area: -2 /  1 /-1 / span 3;
        grid-template-columns: repeat(3, 1fr);

        & > * {
          flex: 1;
        }
      }
    }
  }
}
