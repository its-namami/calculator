class e{static #e=new Map([[[["0"],["p"]],"0"],[[["1"],["q"]],"1"],[[["2"],["w"]],"2"],[[["3"],["e"]],"3"],[[["4"],["r"]],"4"],[[["5"],["t"]],"5"],[[["6"],["y"]],"6"],[[["7"],["u"]],"7"],[[["8"],["i"]],"8"],[[["9"],["o"]],"9"],[[["."],[","]],"."],[[["-"],["m","shift"]],"-"],[[["√"],["s","shift"]],"√"],[[["/"],["/","shift"],["d","shift"]],"/"],[[["+"],["+","shift"],["p","shift"]],"+"],[[["*"],["*","shift"],["t","shift"]],"*"],[[["="],["e","shift"],["enter"]],"="],[[["backspace"],["x"]],"delete"],[[["c","control"]],"clear"],[[["escape"]],"allClear"]]);static processKey(t,r=!1,a=!1){for(let[i,s]of e.#e)for(let e of i)if(e.includes(t.toLowerCase())&&"Shift"!==t&&"Control"!==t&&r===e.includes("shift")&&a===e.includes("control"))return s}static getKeyMap(){return e.#e}}class t{#t;#r;#a={};#i={};static #s;static #n;constructor(e,r){r!==t.#n&&t.#l("newDXCalcCalled");let a=t.#o(e);this.#c(a)}get digits(){return this.#r}get isNegative(){return this.#t}get integer(){return this.#a}get sciNum(){return t.#u(this.value)}get decimal(){return this.#i}get value(){return t.#d(this.#r.toString(),this.#i?.length)}add(e){e instanceof t==!1&&(e=t.number(e));let r=Math.max(this.#i?.length??0,e.#i?.length??0),a=this.#h(r),i=e.#h(r);return t.number(t.#d(a+i,r))}subtract(e){return e instanceof t==!1&&(e=t.number(e)),e.#r*=-1n,e.#t^=!0,this.add(e)}multiply(e){e instanceof t==!1&&(e=t.number(e));let r=(this.#i?.length??0)+(e.#i?.length??0),a=this.#r*e.#r;return t.number(t.#d(a,r))}divide(e){e instanceof t==!1&&(e=t.number(e));let r=Math.max(this.#i?.length??0,e.#i?.length??0),a=this.#h(r),i=e.#h(r);if(0n===i)return t.#l("divideZero");let s=(e,r,a=0)=>a<=t.#s&&e%r!==0n?s(10n*e,r,++a):[e,a];t.#s++;let[n,l]=s(a,i);t.#s--;let o=(n/i).toString(),c=t.#d(o,l);return t.number(c)}sqrt(){this.#t&&t.#l("negativeForbidden",this.value);let e=t.#m(this);return t.number(e.value.slice(0,t.#s+1+e.#a.length))}static get scale(){return t.#s}static number(e){if(e instanceof t)return e;let r=t.#p(e);return new t(r,t.#n)}static{t.#s=9,t.#n=Symbol("unique identifier"),t.from=t.number,t.prototype.times=t.prototype.multiply,t.prototype.plus=t.prototype.add,t.prototype.minus=t.prototype.subtract,t.prototype.div=t.prototype.divide}static setScale=e=>("number"==typeof e?(t.#p(e,"scale"),e>0?t.#s=e:t.#l("numNeedMoreThanZero")):t.#l("unsupportedType",e),t);static longScale(){return t.setScale(20),t}#h(e){let t=e-(this?.#i?.length||0);return t<0?this.#r/10n**-BigInt(t):this.#r*10n**BigInt(t)}static #p(e,r="default"){switch(typeof e){case"string":break;case"number":"scale"!==r&&t.#b("inputNumber"),e=e.toString();break;case"bigint":e=e.toString();break;default:return t.#l("unsupportedType",e)}if(e=e.trim(),!("scale"===r?/^[+-]?(\d+)$/:/^[+-]?(\d+(\.\d*)?|\.\d+)([eE][+-]?\d+)?$/).test(e))return t.#l("badNum",e);switch(r){case"default":return e;case"scale":return+e;default:t.#l("unsupportedValidateMode")}}static #l(e="default",t){switch(e){case"numNeedMoreThanZero":throw Error("\nThe number ${info} is invalid!\nMust be more than zero");case"newDXCalcCalled":throw Error("\nDXCalc constructor cannot be called directly.\nUse DXCalc.number() instead.");case"unsupportedValidateMode":throw Error(`
Unsupported validate mode <${t}>!
Please refer to the documentation.`);case"unsupportedType":throw Error(`
Unsupported type <${typeof t}>!
Please refer to the documentation.`);case"badNum":throw""===t&&(t="empty string"),Error(`
Incorrect number: <${t}> is not a valid number!`);case"badScale":throw Error(`
Cannot have less than 0 decimals: <${t}>!`);case"divideZero":throw Error("\nCannot divide by zero!");case"negSqrt":throw Error("\nSquare root of a negative number is imaginary!");case"negativeForbidden":throw Error(`
Number <${t}> not in range: only positive numbers allowed!`);case"default":throw Error("\nFatal error, that's all we know...")}}static #b(e="default",t){"inputNumber"===e?console.warn("Don't use number type: Prefer string or bigint input for higher precision and avoiding bugs"):console.warn("This is a warning, that's all we know...")}static #o=e=>{let r=e.toString(),a=r.includes("e")||r.includes("E")?t.#g(r):r,i=t.#S(a);return t.#k(i)};static #d(e,r){let a=e.toString(),i="-"===a[0]?"-":"",s=a.slice(i.length),n=s.length,l=(()=>{let e=i+s;return 0===r||void 0===r?e:r<0?i+s+"0".repeat(-r):n>r?i+s.slice(0,n-r)+"."+s.slice(n-r):i+"0."+"0".repeat(r-n)+s})();return t.#k(l)}static #k=e=>{e.indexOf(".");let t="-"===e[0]?"-":"";(e=e.replace("-","").replace(/^0+/g,"")).includes(".")&&("."===(e=e.replace(/0+$/g,"")).at(-1)&&(e=e.slice(0,-1)),"."===e.at(0)&&(e="0"+e));let[r,a]=e.split(".");return""===r&&void 0!==a&&(e="0."+a),""===e?"0":t+e};static #g=e=>{let[r,a="0"]=e.split("e"),[i,s]=r.split("."),n="-"===a[0],l=+(n?a.slice(1):a);return n?t.#d(i+(s??""),l+(s?.length??0)):t.#d(i+(s??""),(s?.length??0)-l)};static #u(e){let r=t.#p(e),a=t.#k(e),i=r.includes("e")||r.includes("E")?t.#g(a):a,[s,n=""]=i.split("."),l="-"===s[0]?"-":"",o=t.#k((s+n).slice(l.length)),c=(()=>{let e=o.length>1,t=o[0]+"."+o.slice(1);return e?l+t:l+s})(),u=i.includes(".")?".":"",[d,h]=c.split("."),m=(()=>{let e=o.length+l.length===i.length-u.length,t=s.length-d.length,r=o.length-i.length+u.length+l.length;return e?t:r})();return c+(0===m?"":"e"+m)}static #y(e){let r=t.#p(e),a="-"===r[0]?"-":"",i=BigInt(r.replace(/^-|\./g,"")),s=r.split(".")[1]?.length??0;return i%10n>=5n&&(i+=10n),i-=i%10n,i/=10n,t.#d(a+i.toString(),Math.min(t.#s,s))}static #S(e){let r=t.#p(e),[a,i]=r.split(".");return(r[0],void 0===i||i.length<=t.#s)?r:(i=i.slice(0,t.#s+1),t.#y(a+"."+i))}static #m(e){if(0n===e.#r)return e;t.#s++;let r=t=>t.add(e.divide(t)).divide("2"),a=t.number("1");for(let e=0;e<100;e++){let e=r(a),t=a.subtract(e),i=0n===t.#r,s=t.#i?.startsWith("0".repeat(this.#s-1))??!1;if(i||s)break;a=r(a)}return t.#s--,a=t.number(a.value)}#c(e){this.#t="-"===e[0],this.#r=BigInt(e.replace(/\./g,"")),[this.#a,this.#i]=e.split("."),this.#t&&(this.#a=this.#a.slice(1))}}class r{#v=[""];#N=[];#f=!1;#w;get publicNumberStack(){return[...this.#v]}get publicOperatorStack(){return[...this.#N]}static #_={"+":(e,r)=>t.number(e).add(r).value,"-":(e,r)=>t.number(e).subtract(r).value,"*":(e,r)=>t.number(e).multiply(r).value,"/":(e,r)=>t.number(e).divide(r).value};static #C={"√":e=>t.number(e).sqrt().value,negate:e=>t.number(e).multiply("-1")};static #x(e){return r.#C.hasOwnProperty(e)}static #E(e){return r.#_.hasOwnProperty(e)}toggleEditMode(){this.#f^=!0}getEditMode(){return this.#f}setEditIndex(e){this.#w=this.#v.length-1-e}clear(){this.#f?this.#v[this.#w]="":(this.#v.pop(),this.#v.push(""))}allClear(){this.#f||(this.#v=[""],this.#N=[])}deleteCharacter(){""!==this.currentNumber?this.#f?this.#v[this.#w]=this.#v[this.#w].slice(0,-1):this.#v.push(this.#v.pop().slice(0,-1)):void 0===this.currentOperator||this.#f||(this.#N.pop(),void 0!==this.previousNumber&&this.#v.pop())}get currentOperator(){return this.#f?this.#N[this.#w]:this.#N.at(-1)}get currentNumber(){return this.#f?this.#v[this.#w]:this.#v.at(-1)}get previousNumber(){return this.#f?this.#v[this.#w-1]:this.#v.at(-2)}get previousOperator(){return this.#N.at(-2)}conditionalAddDecimalSign(){this.currentNumber.includes(".")||(this.#f?this.#v[this.#w]+=".":this.#v.push(this.#v.pop().concat(".")))}addNumber(e){if(this.#f)this.#v[this.#w]=this.#v[this.#w]+e;else{let t=this.#v.pop();this.#v.push(t+e)}}addOperator(e){let t=!1;switch(this.#M(e)){case!0:this.#N.push(e);break;case!1:break;case"negate":"-"!==this.currentNumber&&(this.#v.pop(),this.#v.push("-"));break;case"sameGroup":t=!0,this.#N.pop(),this.#N.push(e);break;case"editMode":t=!0,this.#N[this.#w]=e;return}if(r.#x(this.currentOperator)&&""!==this.currentNumber){this.#I();let e=this.#N.pop();this.#N.push("*"),this.#N.push(e),this.#O(),e=null}void 0!==this.previousOperator&&this.#I(),r.#x(this.currentOperator)||t||"-"===this.#v[0]||"="===this.currentOperator||this.#O(),"="===this.currentOperator&&this.#N.pop()}calculate(){this.#f||(this.#N.push("non-existant operator"),this.#I(),this.#N.pop())}#M(e){let t=r.#x(this.currentOperator)&&r.#x(e)||r.#E(this.currentOperator)&&r.#E(e);if(this.#f)return"editMode";if("-"===e&&1===this.#v.length&&""===this.#v[0]||"-"===this.#v[0])return"negate";if(""===this.currentNumber){if(t)return"sameGroup";else if(!r.#x(e))return!1}return!0}#O(){this.#v.push("")}#U(e){this.#v.push(e),this.#N.splice(-2,1)}#D(e){let t=this.#v.pop(),a=(0,r.#C[e])(t);this.#U(a)}#A(e){let t=this.#v.splice(-2,2),a=(0,r.#_[e])(...t);this.#U(a)}#I(){r.#x(this.previousOperator)?this.#D(this.previousOperator):!r.#x(this.currentOperator)&&r.#E(this.previousOperator)&&this.#A(this.previousOperator),this.#N.length>1&&!r.#x(this.currentOperator)&&this.#I()}}class a{#T;constructor(e){this.#T=e}node(e){return this.#T.querySelector(e)}nodes(e){return this.#T.querySelectorAll(e)}nodesArray(){return Array.from(this.#T.querySelectorAll(selector))}event(e,t){return this.#T.addEventListener(e,t)}get(){return this.#T}}const i=new a(document),s=new a(i.node("#calculator")),n=s.node("#number-display"),l=s.node("#operator-display"),o=s.node("#alternate-numbers"),c=new a(n).node("p"),u=window.getComputedStyle(c).fontSize.split("px")[0],d=new r,h=new class{#q;#z;#L;#F;#$;#Z;#B;#K={"/":"÷","*":"×"};constructor(e,t,r,i,s){this.#q=e,this.#z=t,this.#L=r,this.#$=i.cloneNode(!0),this.#B=s,this.#F=new a(this.#L),i.remove()}makeAlternateNumber(e="",t=!1){let r=this.#$.cloneNode(!0);return r.textContent=e.toString(),t&&r.classList.add("active"),r}updateActiveAlternateNumber(e=0){this.#Z=e}updateAlternateNumbers(e){let t=e.filter(e=>""!==e).map(e=>this.makeAlternateNumber(e));t.length>1?(t.reverse(),t[this.#Z??0].classList.add("active"),this.#L.replaceChildren(...t)):this.#L.replaceChildren()}updateNumber(e){this.#q.textContent=""===e?"__":e}updateOperator(e){e in this.#K?this.#z.textContent=this.#K[e]:this.#z.textContent=e}static addNewChild(e,t){e.appendChild(t)}}(c,l,o,new class{get node(){return this.element}constructor(e){this.element=document.createElement(e)}addClass(e){return this.element.classList.add(e),this}removeClass(e){return this.element.classList.remove(e),this}addText(e){return this.element.textContent=e,this}addChild(e){return this.element.appendChild(e),this}}("div").addClass("alternate-number").node,e.getKeyMap()),m=new class{#P;#X;constructor(e,t){this.#P=e,this.#X=t}stdUpdateUI(){this.#P.updateNumber(this.#X.currentNumber??""),this.#P.updateOperator(this.#X.currentOperator??""),this.#P.updateAlternateNumbers(this.#X.publicNumberStack)}number(e){this.#X.addNumber(e),this.#P.updateNumber(this.#X.currentNumber),this.#P.updateAlternateNumbers(this.#X.publicNumberStack)}operator(e){this.#X.addOperator(e),this.#P.updateNumber(this.#X.previousNumber??this.#X.currentNumber),this.#P.updateOperator(this.#X.currentOperator),this.#P.updateAlternateNumbers(this.#X.publicNumberStack)}decimal(){this.#X.conditionalAddDecimalSign(),this.#P.updateNumber(this.#X.currentNumber),this.#P.updateAlternateNumbers(this.#X.publicNumberStack)}equal(){this.#X.calculate(),this.stdUpdateUI(),this.#P.updateActiveAlternateNumber()}delete(){this.#X.deleteCharacter(),this.stdUpdateUI()}clear(){this.#X.clear(),this.#P.updateNumber(this.#X.currentNumber),this.#P.updateAlternateNumbers(this.#X.publicNumberStack)}allClear(){this.#X.allClear(),this.stdUpdateUI()}}(h,d),p=s.nodes('[id^="num-"].number'),b=s.nodes('[id^="oper-"].operator'),g=s.node("#decimal-sign"),S=s.node("#equal-sign"),k=s.node("#delete-digit"),y=s.node("#clear-entry"),v=s.node("#all-clear-entry"),N=s.node("#copy-clipboard"),f=s.node("#hide-alternate-numbers"),w={"num-1":"1","num-2":"2","num-3":"3","num-4":"4","num-5":"5","num-6":"6","num-7":"7","num-8":"8","num-9":"9","num-0":"0"},_={"oper-plus":"+","oper-minus":"-","oper-multiply":"*","oper-divide":"/","oper-sqrt":"√"},C=new class{#R;#W;#j;constructor(e,t,r){this.#R=e,this.#W=t,this.#j=r}#G(e){switch(e){case"=":this.#j.equal();break;case".":this.#j.decimal();break;case"delete":this.#j.delete();break;case"clear":this.#j.clear();break;case"allClear":this.#j.allClear();break;default:throw Error(`The ${e} is not a handled case!`)}}process(e){this.#R.includes(e)?this.#j.number(e):this.#W.includes(e)?this.#j.operator(e):this.#G(e)}}(Object.values(w),Object.values(_),m);p.forEach(e=>{new a(e).event("click",()=>m.number(w[e.id]))}),b.forEach(e=>{new a(e).event("click",()=>m.operator(_[e.id]))}),new a(g).event("click",()=>m.decimal()),new a(S).event("click",()=>m.equal()),new a(k).event("click",()=>m.delete()),new a(y).event("click",()=>m.clear()),new a(v).event("click",()=>m.allClear());let x=!1;new a(f).event("click",()=>{""===f.textContent?(f.textContent="",o.classList.add("hide-alternate-numbers")):(f.textContent="",o.classList.remove("hide-alternate-numbers"))}),new a(N).event("click",()=>{let e=N.textContent;navigator.clipboard.writeText(c.textContent),N.replaceChildren(""),x||(x=!0,setTimeout(()=>{x=!1,N.replaceChildren(e)},1500))});const E=e=>{null!==e.getAttribute("disabled")?e.removeAttribute("disabled"):e.setAttribute("disabled","")};new a(o).event("click",e=>{event.target.class="alternate-number";{let e=Array.prototype.indexOf.call(o.children,event.target);h.updateActiveAlternateNumber(e),h.updateAlternateNumbers(d.publicNumberStack),d.getEditMode()&&0===e?(d.toggleEditMode(),E(S),E(v),s.get().classList.toggle("edit-mode")):d.getEditMode()||0===e||(d.toggleEditMode(),E(S),E(v),s.get().classList.toggle("edit-mode")),d.setEditIndex(e),m.stdUpdateUI()}}),i.event("keydown",t=>{let r=e.processKey(t.key,t.shiftKey,t.ctrlKey);void 0!==r&&C.process(r)}),new class{#V;#H;#J;constructor(e,t,r){this.#V=e,this.#H=t,this.#J=r}#Q(e,t,r){return Math.max(t,Math.min(e,r))}#Y(){let e=this.#V.clientWidth/this.#H.clientWidth,t=this.#H.style.fontSize?.split("px")[0]||this.#J,r=this.#Q(t*e,this.#J/3,+this.#J);this.#H.style.fontSize=r+"px"}start(){new ResizeObserver(()=>{this.#Y()}).observe(this.#H)}}(n,c,u).start();
//# sourceMappingURL=calculator.fbd45256.js.map
