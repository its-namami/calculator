var e,t,r,s,i,n,a,l,u,o,h,c,d;let p,m;r=(e=(e,t)=>()=>(e&&(t=e(e=0)),t))(()=>{t=class e{static #e=new Map([[[["0"],["p"]],"0"],[[["1"],["q"]],"1"],[[["2"],["w"]],"2"],[[["3"],["e"]],"3"],[[["4"],["r"]],"4"],[[["5"],["t"]],"5"],[[["6"],["y"]],"6"],[[["7"],["u"]],"7"],[[["8"],["i"]],"8"],[[["9"],["o"]],"9"],[[["."],[","]],"."],[[["-"],["m","shift"]],"-"],[[["√"],["s","shift"]],"√"],[[["/"],["/","shift"],["d","shift"]],"/"],[[["+"],["+","shift"],["p","shift"]],"+"],[[["*"],["*","shift"],["t","shift"]],"*"],[[["="],["e","shift"],["enter"]],"="],[[["backspace"],["x"]],"delete"],[[["escape"],["c","control"]],"clear"]]);static keyProcessor(t,r=!1,s=!1){for(let[i,n]of e.#e)for(let e of i)if(e.includes(t.toLowerCase())&&"Shift"!==t&&"Control"!==t&&r===e.includes("shift")&&s===e.includes("control"))return n}static getKeyMap(){return e.#e}}}),i=e(()=>{s=class e{#e;#t;#r={};#s={};static #i;static #n;constructor(t,r){r!==e.#n&&e.#a("newDXCalcCalled");let s=e.#l(t);this.#u(s)}get digits(){return this.#t}get isNegative(){return this.#e}get integer(){return this.#r}get sciNum(){return e.#o(this.value)}get decimal(){return this.#s}get value(){return e.#h(this.#t.toString(),this.#s?.length)}add(t){t instanceof e||(t=e.number(t));let r=Math.max(this.#s?.length??0,t.#s?.length??0),s=this.#c(r),i=t.#c(r);return e.number(e.#h(s+i,r))}subtract(t){return t instanceof e||(t=e.number(t)),t.#t*=-1n,t.#e^=!0,this.add(t)}multiply(t){t instanceof e||(t=e.number(t));let r=(this.#s?.length??0)+(t.#s?.length??0),s=this.#t*t.#t;return e.number(e.#h(s,r))}divide(t){t instanceof e||(t=e.number(t));let r=Math.max(this.#s?.length??0,t.#s?.length??0),s=this.#c(r),i=t.#c(r);if(0n===i)return e.#a("divideZero");let n=(t,r,s=0)=>s<=e.#i&&t%r!==0n?n(10n*t,r,++s):[t,s];e.#i++;let[a,l]=n(s,i);e.#i--;let u=(a/i).toString(),o=e.#h(u,l);return e.number(o)}sqrt(){this.#e&&e.#a("negativeForbidden",this.value);let t=e.#d(this);return e.number(t.value.slice(0,e.#i+1+t.#r.length))}static get scale(){return e.#i}static number(t){if(t instanceof e)return t;let r=e.#p(t);return new e(r,e.#n)}static{e.#i=9,e.#n=Symbol("unique identifier"),e.from=e.number,e.prototype.times=e.prototype.multiply,e.prototype.plus=e.prototype.add,e.prototype.minus=e.prototype.subtract,e.prototype.div=e.prototype.divide}static setScale=t=>("number"==typeof t?(e.#p(t,"scale"),t>0?e.#i=t:e.#a("numNeedMoreThanZero")):e.#a("unsupportedType",t),e);static longScale(){return e.setScale(20),e}#c(e){let t=e-(this?.#s?.length||0);return t<0?this.#t/10n**-BigInt(t):this.#t*10n**BigInt(t)}static #p(t,r="default"){switch(typeof t){case"string":break;case"number":"scale"!==r&&e.#m("inputNumber"),t=t.toString();break;case"bigint":t=t.toString();break;default:return e.#a("unsupportedType",t)}if(t=t.trim(),!("scale"===r?/^[+-]?(\d+)$/:/^[+-]?(\d+(\.\d*)?|\.\d+)([eE][+-]?\d+)?$/).test(t))return e.#a("badNum",t);switch(r){case"default":return t;case"scale":return+t;default:e.#a("unsupportedValidateMode")}}static #a(e="default",t){switch(e){case"numNeedMoreThanZero":throw Error(`
The number \${info} is invalid!
Must be more than zero`);case"newDXCalcCalled":throw Error(`
DXCalc constructor cannot be called directly.
Use DXCalc.number() instead.`);case"unsupportedValidateMode":throw Error(`
Unsupported validate mode <${t}>!
Please refer to the documentation.`);case"unsupportedType":throw Error(`
Unsupported type <${typeof t}>!
Please refer to the documentation.`);case"badNum":throw""===t&&(t="empty string"),Error(`
Incorrect number: <${t}> is not a valid number!`);case"badScale":throw Error(`
Cannot have less than 0 decimals: <${t}>!`);case"divideZero":throw Error(`
Cannot divide by zero!`);case"negSqrt":throw Error(`
Square root of a negative number is imaginary!`);case"negativeForbidden":throw Error(`
Number <${t}> not in range: only positive numbers allowed!`);case"default":throw Error(`
Fatal error, that's all we know...`)}}static #m(e="default",t){"inputNumber"===e?console.warn("Don't use number type: Prefer string or bigint input for higher precision and avoiding bugs"):console.warn("This is a warning, that's all we know...")}static #l=t=>{let r=t.toString(),s=r.includes("e")||r.includes("E")?e.#b(r):r,i=e.#g(s);return e.#v(i)};static #h(t,r){let s,i=t.toString(),n="-"===i[0]?"-":"",a=i.slice(n.length),l=a.length,u=(s=n+a,0===r||void 0===r?s:r<0?n+a+"0".repeat(-r):l>r?n+a.slice(0,l-r)+"."+a.slice(l-r):n+"0."+"0".repeat(r-l)+a);return e.#v(u)}static #v=e=>{e.indexOf(".");let t="-"===e[0]?"-":"";(e=e.replace("-","").replace(/^0+/g,"")).includes(".")&&("."===(e=e.replace(/0+$/g,"")).at(-1)&&(e=e.slice(0,-1)),"."===e.at(0)&&(e="0"+e));let[r,s]=e.split(".");return""===r&&void 0!==s&&(e="0."+s),""===e?"0":t+e};static #b=t=>{let[r,s="0"]=t.split("e"),[i,n]=r.split("."),a="-"===s[0],l=+(a?s.slice(1):s);return a?e.#h(i+(n??""),l+(n?.length??0)):e.#h(i+(n??""),(n?.length??0)-l)};static #o(t){let r,s,i,n,a,l=e.#p(t),u=e.#v(t),o=l.includes("e")||l.includes("E")?e.#b(u):u,[h,c=""]=o.split("."),d="-"===h[0]?"-":"",p=e.#v((h+c).slice(d.length)),m=(r=p.length>1,s=p[0]+"."+p.slice(1),r?d+s:d+h),b=o.includes(".")?".":"",[g,v]=m.split("."),f=(i=p.length+d.length===o.length-b.length,n=h.length-g.length,a=p.length-o.length+b.length+d.length,i?n:a);return m+(0===f?"":"e"+f)}static #f(t){let r=e.#p(t),s="-"===r[0]?"-":"",i=BigInt(r.replace(/^-|\./g,"")),n=r.split(".")[1]?.length??0;return i%10n>=5n&&(i+=10n),i-=i%10n,i/=10n,e.#h(s+i.toString(),Math.min(e.#i,n))}static #g(t){let r=e.#p(t),[s,i]=r.split(".");return r[0],void 0===i||i.length<=e.#i?r:(i=i.slice(0,e.#i+1),e.#f(s+"."+i))}static #d(t){if(0n===t.#t)return t;e.#i++;let r=e=>e.add(t.divide(e)).divide("2"),s=e.number("1");for(let e=0;e<100;e++){let e=r(s),t=s.subtract(e),i=0n===t.#t,n=t.#s?.startsWith("0".repeat(this.#i-1))??!1;if(i||n)break;s=r(s)}return e.#i--,s=e.number(s.value)}#u(e){this.#e="-"===e[0],this.#t=BigInt(e.replace(/\./g,"")),[this.#r,this.#s]=e.split("."),this.#e&&(this.#r=this.#r.slice(1))}}}),a=e(()=>{i(),n=class e{#e=[""];#t=[];get publicNumberStack(){return[...this.#e]}get publicOperatorStack(){return[...this.#t]}static #r={"+":(e,t)=>s.number(e).add(t).value,"-":(e,t)=>s.number(e).subtract(t).value,"*":(e,t)=>s.number(e).multiply(t).value,"/":(e,t)=>s.number(e).divide(t).value};static #s={"√":e=>s.number(e).sqrt().value,negate:e=>s.number(e).multiply("-1")};static #i(t){return e.#s.hasOwnProperty(t)}static #n(t){return e.#r.hasOwnProperty(t)}resetAll(){this.#e=[""],this.#t=[]}deleteCharacter(){""!==this.currentNumber?this.#e.push(this.#e.pop().slice(0,-1)):void 0!==this.currentOperator&&(this.#t.pop(),void 0!==this.previousNumber&&this.#e.pop())}get currentOperator(){return this.#t.at(-1)}get currentNumber(){return this.#e.at(-1)}get previousNumber(){return this.#e.at(-2)}get #c(){return this.#t.at(-2)}conditionalAddDecimalSign(){this.currentNumber.includes(".")||this.#e.push(this.#e.pop().concat("."))}addNumber(e){let t=this.#e.pop()+e;this.#e.push(t)}addOperator(t){let r=!1;switch(this.#p(t)){case!0:this.#t.push(t);break;case!1:break;case"negate":"-"!==this.currentNumber&&(this.#e.pop(),this.#e.push("-"));break;case"sameGroup":r=!0,this.#t.pop(),this.#t.push(t)}if(e.#i(this.currentOperator)&&""!==this.currentNumber){let e=this.#t.pop();this.#t.push("*"),this.#t.push(e),this.#a(),e=null}void 0!==this.#c&&this.#v(),e.#i(this.currentOperator)||r||"-"===this.#e[0]||this.#a()}calculate(){this.#t.push("non-existant operator"),this.#v(),this.#t.pop()}#p(t){let r=e.#i(this.currentOperator)&&e.#i(t)||e.#n(this.currentOperator)&&e.#n(t);return"-"===t&&1===this.#e.length&&""===this.#e[0]||"-"===this.#e[0]?"negate":""!==this.currentNumber||!!r&&"sameGroup"}#a(){this.#e.push("")}#m(e){this.#e.push(e),this.#t.splice(-2,1)}#l(t){let r=this.#e.pop(),s=(0,e.#s[t])(r);this.#m(s)}#h(t){let r=this.#e.splice(-2,2),s=(0,e.#r[t])(...r);this.#m(s)}#v(){e.#i(this.#c)?this.#l(this.#c):!e.#i(this.currentOperator)&&e.#n(this.#c)&&this.#h(this.#c),this.#t.length>1&&!e.#i(this.currentOperator)&&this.#v()}}}),u=e(()=>{l=class{#e;constructor(e){this.#e=e}node(e){return this.#e.querySelector(e)}nodes(e){return this.#e.querySelectorAll(e)}nodesArray(){return Array.from(this.#e.querySelectorAll(selector))}event(e,t){return this.#e.addEventListener(e,t)}}}),h=e(()=>{u(),o=class{#e;#t;#r;#s;#i;#n;constructor(e,t,r,s,i){this.#e=e,this.#t=t,this.#r=r,this.#i=s.cloneNode(!0),this.#n=i,this.#s=new l(this.#r),s.remove()}addAlternateNumber(e=""){this.#i.cloneNode(!0).textContent=e.toString(),this.#r.appendChild}removeAlternateNumber(e=null){let t=this.#s.nodesArray("*"),r=t.filter(t=>t.textContent===e.toString());null===e||r===[]?t[0]?.remove():r.remove()}resetAlternateNumbers(){this.#s.nodes("*").remove()}#c(){}updateNumber(e){""===e||(this.#e.textContent=e)}updateOperator(e){this.#t.textContent="/"===e?"÷":e}}}),d=e(()=>{c=class{#e;#t;#r;constructor(e,t,r){this.#e=e,this.#t=t,this.#r=r}#s(e,t,r){return Math.max(t,Math.min(e,r))}#i(){let e=this.#e.clientWidth/this.#t.clientWidth,t=this.#t.style.fontSize?.split("px")[0]||this.#r,r=this.#s(t*e,this.#r/3,+this.#r);this.#t.style.fontSize=r+"px"}start(){new ResizeObserver(()=>{this.#i()}).observe(this.#t)}}}),(p=()=>{let e;r(),a(),h(),u(),d();var s=new l(document),i=new l(s.node("#calculator")),p=i.node("#number-display"),m=i.node("#operator-display"),b=i.node("#alternate-numbers"),g=new l(p).node("p"),v=window.getComputedStyle(g).fontSize.split("px")[0],f=new n,y=new o(g,m,b,((e=document.createElement("div")).classList.add("alternate-number"),e),t.getKeyMap()),w=i.nodes('[id^="num-"].number'),N=i.nodes('[id^="oper-"].operator'),S=i.node("#decimal-sign"),k=i.node("#equal-sign"),E=i.node("#delete-digit"),O=i.node("#clear-entry");new c(p,g,v).start();var C={"num-1":"1","num-2":"2","num-3":"3","num-4":"4","num-5":"5","num-6":"6","num-7":"7","num-8":"8","num-9":"9","num-0":"0"},x={"equal-sign":"=","oper-plus":"+","oper-minus":"-","oper-multiply":"*","oper-divide":"/","oper-sqrt":"√"},M=Object.values(C),q=Object.values(x),A=()=>{y.updateNumber(f.currentNumber??""),y.updateOperator(f.currentOperator??"")},$=e=>{f.addNumber(e),y.updateNumber(f.currentNumber)},L=e=>{f.addOperator(e),y.updateNumber(f.previousNumber),y.updateOperator(f.currentOperator)},T=()=>{f.conditionalAddDecimalSign(),y.updateNumber(f.currentNumber)},D=()=>{f.calculate(),A()},P=()=>{f.deleteCharacter(),A()},z=()=>{f.resetAll(),A()};w.forEach(e=>{e.addEventListener("click",()=>{$(C[e.id])})}),N.forEach(e=>{e.addEventListener("click",()=>{L(x[e.id])})}),S.addEventListener("click",()=>{T()}),k.addEventListener("click",()=>{D()}),E.addEventListener("click",()=>{P()}),O.addEventListener("click",()=>{z()}),s.event("keydown",e=>{let r=t.keyProcessor(e.key,e.shiftKey,e.ctrlKey);void 0!==r&&(M.includes(r)?$(r):q.includes(r)?L(r):(e=>{switch(e){case"=":D();break;case".":T();break;case"delete":P();break;case"clear":z();break;default:throw Error(`The ${e} is not a handled case!`)}})(r))})},()=>(m||p((m={exports:{}}).exports,m),m.exports))();
//# sourceMappingURL=calculator.d064c3f3.js.map
